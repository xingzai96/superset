/*! Bootstrap integration for DataTables' Editor
 * Â© SpryMedia Ltd - datatables.net/license
 */
import jQuery from"jquery";import DataTable from"datatables.net-bs5";import Editor from"datatables.net-editor";let $=jQuery,shown=(DataTable.Editor.defaults.display="bootstrap",$.extend(!0,DataTable.Editor.classes,{header:{wrapper:"DTE_Header",title:{tag:"h5",class:"modal-title"}},body:{wrapper:"DTE_Body"},footer:{wrapper:"DTE_Footer"},form:{tag:"form-horizontal",button:"btn",buttonInternal:"btn btn-outline-secondary",buttonSubmit:"btn btn-primary"},field:{wrapper:"DTE_Field form-group row",label:"col-lg-4 col-form-label",input:"col-lg-8 DTE_Field_Input",error:"error is-invalid","msg-labelInfo":"form-text text-secondary small","msg-info":"form-text text-secondary small","msg-message":"form-text text-secondary small","msg-error":"form-text text-danger small",multiValue:"card multi-value",multiInfo:"small",multiRestore:"multi-restore"}}),$.extend(!0,DataTable.ext.buttons,{create:{formButtons:{className:"btn-primary"}},edit:{formButtons:{className:"btn-primary"}},remove:{formButtons:{className:"btn-danger"}}}),!(DataTable.Editor.fieldTypes.datatable.tableClass="table")),fullyShown=!1;const dom={content:$('<div class="modal fade DTED"><div class="modal-dialog"></div></div>'),close:$('<button class="btn-close"></div>')};let modal,_bs=window.bootstrap;DataTable.Editor.bootstrap=function(t){_bs=t},DataTable.Editor.display.bootstrap=$.extend(!0,{},DataTable.Editor.models.displayController,{init:function(t){return t.on("displayOrder.dtebs open.dtebs",function(){$.each(t.s.fields,function(t,o){$("input:not([type=checkbox]):not([type=radio]), select, textarea",o.node()).addClass("form-control"),$("input[type=checkbox], input[type=radio]",o.node()).addClass("form-check-input"),$("select",o.node()).addClass("form-select")})}),DataTable.Editor.display.bootstrap},open:function(d,t,o){modal=modal||new _bs.Modal(dom.content[0],{backdrop:"static",keyboard:!1}),$(t).addClass("modal-content"),$(".DTE_Header",t).addClass("modal-header"),$(".DTE_Body",t).addClass("modal-body"),$(".DTE_Footer",t).addClass("modal-footer"),$(t).find("div.DTE_Field_Type_datatable div.dt-buttons").removeClass("btn-group").addClass("btn-group-vertical"),dom.close.attr("title",d.i18n.close).off("click.dte-bs5").on("click.dte-bs5",function(){d.close("icon")}).appendTo($("div.modal-header",t));let e=!1;$(document).off("mousedown.dte-bs5").on("mousedown.dte-bs5","div.modal",function(t){e=!(!$(t.target).hasClass("modal")||!shown)}),$(document).off("click.dte-bs5").on("click.dte-bs5","div.modal",function(t){$(t.target).hasClass("modal")&&e&&d.background()});var a,l=dom.content.find("div.modal-dialog");l.addClass(DataTable.Editor.display.bootstrap.classes.modal),l.children().detach(),l.append(t),d.c.bootstrap&&d.c.bootstrap.floatingLabels&&(a=["readonly","text","textarea","select","datetime"],d.order().filter(function(t){t=d.field(t).s.opts.type;return a.includes(t)}).forEach(function(t){var o=$(d.field(t).node()),e=o.find(".DTE_Field_InputControl"),a=e.children(":first-child"),o=o.find("label");e.parent().removeClass("col-lg-8").addClass("col-lg-12"),e.addClass("form-floating"),a.addClass("form-control").attr("placeholder",t),o.appendTo(e)})),shown?o&&o():(shown=!0,fullyShown=!1,dom.content[0].addEventListener("shown.bs.modal",function(){d.s.setFocus&&d.s.setFocus.focus(),fullyShown=!0,dom.content.find("table.dataTable").DataTable().columns.adjust(),o&&o()},{once:!0}),dom.content[0].addEventListener("hidden",function(){shown=!1},{once:!0}),$(dom.content).appendTo("body"),modal.show())},close:function(t,o){shown?fullyShown?(dom.content[0].addEventListener("hidden.bs.modal",function(){$(this).detach()},{once:!0}),modal.hide(),shown=!1,fullyShown=!1,o&&o()):dom.content[0].addEventListener("shown.bs.modal",function(){DataTable.Editor.display.bootstrap.close(t,o)},{once:!0}):o&&o()},node:function(){return dom.content[0]},classes:{modal:"modal-dialog-scrollable modal-dialog-centered modal-lg"}});export default DataTable.Editor;